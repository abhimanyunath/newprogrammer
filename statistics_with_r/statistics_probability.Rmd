---
title: "Introduction to probability and data"
author: "abhimanyu nath"
output: html_notebook
---

**hello there !!**


```{r}
2+2 
4+5
```
copy r formula ctrl +shift + i
```{r}

```

![](images/1.png)

![](images/2.png)
![](images/3.png)
![](images/4.png)
![](images/5.png)
![](images/6.png)
![](images/7.png)
![](images/8.png)
![](images/9.png)
![](images/10.png)
![](images/11.png)

```{r}
data("present")
View(present)
```

**Shortcuts**

piping operator: ctrl + shift + m

assign operator: alt + -

# Assignment

```{r}
library(dplyr)
library(ggplot2)
library(statsr)
```


```{r}
data(arbuthnot)
dim(arbuthnot)
names(arbuthnot)
arbuthnot$boys
ggplot(data = arbuthnot, aes(x = year, y = girls)) +
  geom_point()
arbuthnot <- arbuthnot %>%
  mutate(total = boys + girls)
ggplot(data = arbuthnot, aes(x = year, y = total)) +
  geom_line()
ggplot(data = arbuthnot, aes(x = year, y = total)) +
  geom_line() +
  geom_point()
arbuthnot <- arbuthnot %>%
  mutate(more_boys = boys > girls)
```


```{r}
data(present)
dim(present)
```
Calculate the total number of births for each year and store these values in a new variable called total in the  present dataset. Then, calculate the proportion of boys born each year and store these values in a new variable called prop_boys in the same dataset. Plot these values over time and based on the plot determine if the following statement is true or false: The proportion of boys born in the US has decreased over time.

True

False
```{r}
present <- present %>% 
mutate(total = boys + girls)%>% 
mutate(prop_boys = boys/total)

ggplot(data = present, aes(x = year, y = prop_boys)) + geom_line()

```

Create a new variable called more_boys which contains the value of either TRUE if that year had more boys than girls, or FALSE if that year did not. Based on this variable which of the following statements is true?

Every year there are more girls born than boys.

Every year there are more boys born than girls.

Half of the years there are more boys born, and the other half more girls born.

```{r}
present <- present %>%
mutate(more_boys = boys > girls)

ggplot(data = present, aes(x = year, y = more_boys)) + geom_line()
```

Calculate the boy-to-girl ratio each year, and store these values in a new variable called prop_boy_girl in the  present dataset. Plot these values over time. Which of the following best describes the trend?

There appears to be no trend in the boy-to-girl ratio from 1940 to 2013.

There is initially an increase in boy-to-girl ratio, which peaks around 1960. After 1960 there is a decrease in the boy-to-girl ratio, but the number begins to increase in the mid 1970s.

There is initially a decrease in the boy-to-girl ratio, and then an increase between 1960 and 1970, followed by a decrease.
The boy-to-girl ratio has increased over time.

There is an initial decrease in the boy-to-girl ratio born but this number appears to level around 1960 and remain constant since then.

```{r}
present <- present %>%
mutate(prop_boy_girl = boys/girls)

ggplot(data = present, aes(x = year, y = prop_boy_girl)) + geom_line()
```















```{r}
data("nycflights")
```


```{r}
names(nycflights)
```

```{r}
View(nycflights)
```

```{r}
?nycflights
```

```{r}
str(nycflights)
```

```{r}
ggplot(data = nycflights, aes(x = dep_delay)) + geom_histogram()
```


```{r}
ggplot(data = nycflights, aes(x = dep_delay)) + geom_histogram(binwidth = 150)
```



```{r}
rdu_flights <- nycflights %>%
  filter(dest == "RDU")

ggplot(data = rdu_flights, aes(x = dep_delay)) +
  geom_histogram()
```


```{r}
rdu_flights %>%
  summarise(mean_dd = mean(dep_delay), sd_dd = sd(dep_delay), n = n())
```
1. Create a new data frame that includes flights headed to SFO in February, and save 
this data frame as `sfo_feb_flights`. How many flights meet these criteria? 
<ol>
<li> 68 </li> 
<li> 1345 </li> 
<li> 2286 </li> 
<li> 3563 </li>
<li> 32735 </li>
</ol>
```{r}
sfo_feb_flights <- nycflights %>%
  filter(dest == "SFO", month == 2)

sfo_feb_flights %>%
  summarise(n = n())
```
2. Make a histogram and calculate appropriate summary statistics for **arrival** 
delays of `sfo_feb_flights`. Which of the following is false? 
<ol>
<li> The distribution is unimodal. </li> 
<li> The distribution is right skewed. </li> 
<li> No flight is delayed more than 2 hours. </li> 
<li> The distribution has several extreme values on the right side. </li>
<li> More than 50% of flights arrive on time or earlier than scheduled. </li>
</ol>

```{r}
sfo_feb_flights
```



```{r}
ggplot(data = sfo_feb_flights, aes(x = arr_delay)) +
  geom_histogram(binwidth = 10)
```



```{r}
sfo_feb_flights %>%
  group_by(carrier) %>%
  summarise(IQR(arr_delay), median(arr_delay), n = n())
```


```{r}
nycflights %>%
  group_by(month) %>%
  summarise(mean_dd = mean(dep_delay),n = n()) %>%
  arrange(desc(mean_dd))
```


```{r}
nycflights %>%
  group_by(month) %>%
  summarise(median_dd = median(dep_delay),n = n()) %>%
  arrange(desc(median_dd))
```


```{r}
ggplot(nycflights, aes(x = factor(month), y = dep_delay)) +
  geom_boxplot()
```


```{r}
nycflights <- nycflights %>%
  mutate(dep_type = ifelse(arr_delay < 5, "on time", "delayed"))

nycflights %>%
  group_by(origin) %>%
  summarise(ot_dep_rate = sum(dep_type == "on time") / n()) %>%   
  arrange(desc(ot_dep_rate))
```

```{r}
ggplot(data = nycflights, aes(x = origin, fill = dep_type)) +
  geom_bar()
```

```{r}
nycflights<-nycflights %>% 
  mutate(avg_speed = distance/air_time) %>% 
  arrange(desc(avg_speed))
select(nycflights,avg_speed, tailnum)
```


```{r}
nycflights
```


```{r}
ggplot(data = nycflights, aes(y = avg_speed, x = distance)) + geom_point()
```
```{r}
nycflights <- nycflights %>% 
  mutate(arr_type = ifelse(arr_delay<=0,"on time","delayed")) 

nycflights %>% 
  group_by(dep_type)%>%
  summarise(ot_arr_rate=sum(arr_type=="on time")/n())

```
















  





